"use strict";(self.webpackChunkrx_angular=self.webpackChunkrx_angular||[]).push([[7867],{4435:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>p,toc:()=>c});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),s=["components"],l={sidebar_label:"Input Bindings",title:"Handling Input Bindings"},o="Handling Input Bindings",p={unversionedId:"state/tutorials/basic-tutorial/input-bindings",id:"state/tutorials/basic-tutorial/input-bindings",title:"Handling Input Bindings",description:"In this section, we will remove this._refreshInterval that defines how frequently our product list should be refreshed and save its data inside the component's state (see [input-bindings.start.component.ts] [input-bindings.start.component.ts].)",source:"@site/docs/state/tutorials/basic-tutorial/02-input-bindings.md",sourceDirName:"state/tutorials/basic-tutorial",slug:"/state/tutorials/basic-tutorial/input-bindings",permalink:"/docs/state/tutorials/basic-tutorial/input-bindings",draft:!1,editUrl:"https://github.com/rx-angular/rx-angular/edit/main/docs/state/tutorials/basic-tutorial/02-input-bindings.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Input Bindings",title:"Handling Input Bindings"},sidebar:"docs",previous:{title:"Setup",permalink:"/docs/state/tutorials/basic-tutorial/setup"},next:{title:"Output Bindings",permalink:"/docs/state/tutorials/basic-tutorial/output-bindings"}},u={},c=[{value:"Set up <code>@Input</code> bindings",id:"set-up-input-bindings",level:2},{value:"Bind the state to the view",id:"bind-the-state-to-the-view",level:2}],d={toc:c};function h(e){var t=e.components,n=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"handling-input-bindings"},"Handling Input Bindings"),(0,i.kt)("p",null,"In this section, we will remove ",(0,i.kt)("inlineCode",{parentName:"p"},"this._refreshInterval")," that defines how frequently our product list should be refreshed and save its data inside the component's state (see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rx-angular/rx-angular/blob/main/apps/demos/src/app/features/tutorials/basics/2-input-bindings/input-bindings.start.component.ts"},"input-bindings.start.component.ts"),".)"),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"set-up-input-bindings"},"Set up ",(0,i.kt)("inlineCode",{parentName:"h2"},"@Input")," bindings"),(0,i.kt)("p",null,"Since parts of our state are passed as input bindings, we need to insert these changes into the component's state. It requires setting values imperatively.\nThe problem with this approach is that it's not composable.\nThat's why in this case we will have to hook into the imperative callback of the ",(0,i.kt)("inlineCode",{parentName:"p"},"refreshInterval")," component's input binding."),(0,i.kt)("p",null,"Thus, we have to perform a partial update to our state by providing an object containing the new state slice ",(0,i.kt)("inlineCode",{parentName:"p"},"{refreshInterval: number}"),".\nThis can be done by using either a reduce function ",(0,i.kt)("inlineCode",{parentName:"p"},"(oldState) => ({refreshInterval: oldState.refreshInterval + 2})")," or the state slice itself ",(0,i.kt)("inlineCode",{parentName:"p"},"{refreshInterval: 2}"),".\nAs no previous state is needed to calculate the new value, we will opt for the latter and provide the slice itself to partially update our state."),(0,i.kt)("p",null,"Please note that ",(0,i.kt)("inlineCode",{parentName:"p"},"{refreshInterval}")," is a short form of ",(0,i.kt)("inlineCode",{parentName:"p"},"{refreshInterval: refreshInterval}"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff"},"@Input()\nset refreshInterval(refreshInterval: number) {\n    if (refreshInterval > 100) {\n+       this.set({refreshInterval});\n-       this._refreshInterval = refreshInterval;\n        this.resetRefreshInterval();\n    }\n}\n")),(0,i.kt)("p",null,"After removing the ",(0,i.kt)("inlineCode",{parentName:"p"},"_refreshInterval"),", we also have to adopt the related method ",(0,i.kt)("inlineCode",{parentName:"p"},"resetRefreshTick")," where ",(0,i.kt)("inlineCode",{parentName:"p"},"_refreshInterval")," is used.\nAs ",(0,i.kt)("inlineCode",{parentName:"p"},"refreshInterval")," is already part of the component's state,\nwe can easily access the value with ",(0,i.kt)("inlineCode",{parentName:"p"},"this.get('refreshInterval')"),", using the ",(0,i.kt)("inlineCode",{parentName:"p"},"interval")," operator to create a new interval."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff"},"resetRefreshTick() {\n    this.intervalSubscription.unsubscribe();\n+    this.intervalSubscription = interval(this.get('refreshInterval'))\n-    this.intervalSubscription = interval(this._refreshInterval)\n       .pipe(tap((_) => this.listService.refetchList()))\n       .subscribe();\n}\n")),(0,i.kt)("p",null,"If we edit the input field, we should see the changes in the component's logged state in the template."),(0,i.kt)("h2",{id:"bind-the-state-to-the-view"},"Bind the state to the view"),(0,i.kt)("p",null,"In this example, we will use a very simple method and directly bind the complete state of our component to the view.\nFurther performance improvements can be introduced later on."),(0,i.kt)("p",null,"To bind the state, we can use a simple trick with the structural directive ",(0,i.kt)("inlineCode",{parentName:"p"},"*ngIf"),", the ",(0,i.kt)("inlineCode",{parentName:"p"},"as")," syntax, and the ",(0,i.kt)("inlineCode",{parentName:"p"},"async")," pipe."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<ng-container *ngIf="model$ | async as vm"> </ng-container>\n')),(0,i.kt)("p",null,"Please note that ",(0,i.kt)("inlineCode",{parentName:"p"},"vm")," is an abbreviation for view model."),(0,i.kt)("p",null,"The implementation in our expansion panel will look as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},'<mat-expansion-panel *ngIf="model$ | async as vm"> </mat-expansion-panel>\n')),(0,i.kt)("p",null,"Now we can replace the ",(0,i.kt)("inlineCode",{parentName:"p"},"_refreshInterval")," component in the template with ",(0,i.kt)("inlineCode",{parentName:"p"},"vm.refreshInterval"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html"},"<span>\n  (storeList$ | async)?.length }} Repositories Updated every: {{\n  vm.refreshInterval }} ms\n</span>\n")))}h.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=r.createContext({}),p=function(e){var t=r.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,m=d["".concat(o,".").concat(h)]||d[h]||c[h]||i;return n?r.createElement(m,s(s({ref:t},u),{},{components:n})):r.createElement(m,s({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,s=new Array(i);s[0]=d;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,s[1]=l;for(var p=2;p<i;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);